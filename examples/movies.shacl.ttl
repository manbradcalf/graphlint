@prefix ex:  <http://example.org/movies#> .
@prefix sh:  <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# ── Movie ────────────────────────────────────────────────────────────

ex:MovieShape
    a sh:NodeShape ;
    sh:targetClass ex:Movie ;

    sh:property [
        sh:path     ex:title ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
    ] ;

    sh:property [
        sh:path     ex:released ;
        sh:datatype xsd:integer ;
        sh:minCount 1 ;
    ] ;

    sh:property [
        sh:path     ex:tagline ;
        sh:datatype xsd:string ;
    ] ;

    sh:property [
        sh:path     ex:hasActor ;
        sh:nodeKind sh:IRI ;
        sh:node     ex:PersonShape ;
        sh:minCount 1 ;
    ] ;

    sh:property [
        sh:path     ex:hasDirector ;
        sh:nodeKind sh:IRI ;
        sh:node     ex:PersonShape ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] ;

    sh:property [
        sh:path     ex:inGenre ;
        sh:nodeKind sh:IRI ;
        sh:node     ex:GenreShape ;
        sh:minCount 1 ;
    ] .

# ── Person ───────────────────────────────────────────────────────────

ex:PersonShape
    a sh:NodeShape ;
    sh:targetClass ex:Person ;

    sh:property [
        sh:path     ex:name ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
    ] ;

    sh:property [
        sh:path     ex:born ;
        sh:datatype xsd:integer ;
    ] ;

    sh:property [
        sh:path     ex:nationality ;
        sh:datatype xsd:string ;
    ] .

# ── Genre ────────────────────────────────────────────────────────────

ex:GenreShape
    a sh:NodeShape ;
    sh:targetClass ex:Genre ;

    sh:property [
        sh:path     ex:name ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
    ] ;

    sh:property [
        sh:path     ex:rating ;
        sh:in       ( "G" "PG" "PG-13" "R" "NC-17" ) ;
    ] .

# ── Review ───────────────────────────────────────────────────────────

ex:ReviewShape
    a sh:NodeShape ;
    sh:targetClass ex:Review ;

    sh:property [
        sh:path     ex:score ;
        sh:datatype xsd:float ;
        sh:minCount 1 ;
    ] ;

    sh:property [
        sh:path     ex:summary ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
    ] ;

    sh:property [
        sh:path     ex:reviewOf ;
        sh:nodeKind sh:IRI ;
        sh:node     ex:MovieShape ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] ;

    sh:property [
        sh:path     ex:writtenBy ;
        sh:nodeKind sh:IRI ;
        sh:node     ex:PersonShape ;
        sh:maxCount 1 ;
    ] .
